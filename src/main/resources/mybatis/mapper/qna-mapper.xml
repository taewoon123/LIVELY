<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "qna">
	
	<insert id="write">
		INSERT INTO QNA
		(
			QNA_NO
			, QNA_TITLE
			, QNA_CONTENT
			,WRITER
			, ADMIN_NO
		) 
		VALUES 
		(
			SEQ_QNA_NO.NEXTVAL
			, #{qnaTitle}
			, #{qnaContent}
			, '1'
			, '1'

		)
	</insert> 
	
	<select id="getQnaList" resultType = "qnaVo">
  		SELECT *
  		FROM QNA
  		WHERE DELETE_YN = 'N'
  		ORDER BY QNA_NO DESC
  	</select>
  	
  	<select id="getQnaListCnt" resultType = "int">
  		SELECT COUNT(*)
  		FROM QNA
  		WHERE DELETE_YN = 'N'
  	</select>
  	
  	<update id="increaseViews">
		UPDATE QNA
		    SET VIEWS = VIEWS+1
	    WHERE   QNA_NO = #{no}
	    AND     DELETE_YN= 'N'
	</update>
	
	<select id="getQna" resultType = "qnaVo">
  		SELECT *
  		FROM QNA
  		WHERE QNA_NO = #{no}
  		AND DELETE_YN = 'N'
  	</select>
  	
  	<update id="edit">
  		UPDATE QNA
  			SET
  				QNA_TITLE = #{qnaTitle}
  				,QNA_CONTENT = #{qnaContent}
  				,EDIT_DATE = SYSDATE
  			WHERE QNA_NO = #{qnaNo}
  	</update>
  	
  	<update id="delete">
  		UPDATE QNA
  			SET
  				DELETE_YN = 'Y'
  			,EDIT_DATE = SYSDATE
  		WHERE QNA_NO = #{no}
  	</update>
 </mapper>